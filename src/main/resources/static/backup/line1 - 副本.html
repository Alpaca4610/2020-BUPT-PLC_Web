<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <meta charset="utf-8">
    <title>line1</title>
    <style type=text/css>
        @media screen and (max-width: 1200px) and (min-width: 0px) {
            .modal-lg {
        width: 1000px;     
        height: 1000px;
    }
            .box {
                text-align: center;
                margin: auto;
                border: solid 2px black;
                width: 1200px;
                height: 736px;
            }
            .boxnav {
                width: 100%;
                height: 64px;
                border: solid 2px black;
                float: left;
            }
            .box_style {
                width: 100%;
                height: 364px;
                border: solid 2px black;
                float: left;
            }
            label {
                display: inline-block;
                width: 30px;
                height: 30px;
                border: 5px;
                border-style: double;
                border-color: black;
                margin-top: 12px;
                float: left;
                margin-left: 2px;
            }
            input {
                display: none;
            }
            input+label:after {
                content: "\2716";
                font-size: 20px;
                color: #FFF;
            }
            input:checked+label:after {
                color: black;
            }
            .form-input {
                float: left;
                margin-top: 20px;
                margin-left: 2px;
                margin-right: 50px;
            }
            .Bigbox_Style {
                text-align: center;
                border: solid 2px black;
                width: 1200px;
                height: 736px;
                display: none;
            }
        }
        
        @media screen and (min-width: 1200px) {
            .modal-lg {
        width: 1500px;     
        height: 1000px;
    }
            .box {
                text-align: center;
                margin: auto;
                border: solid 5px black;
                width: 1850px;
                height: 800px;
            }
            .boxnav {
                width: 1850px;
                height: 64px;
                border: solid 2px black;
            }
            .box_style {
                width: 33.1%;
                height: 364px;
                border: solid 2px black;
                float: left;
            }
            label {
                display: inline-block;
                width: 30px;
                height: 30px;
                border: 5px;
                border-style: double;
                border-color: black;
                margin-top: 15px;
                float: left;
                margin-left: 0.8%;
            }
            input {
                display: none;
            }
            input+label:after {
                content: "\2716";
                font-size: 20px;
                color: #FFF;
            }
            input:checked+label:after {
                color: black;
            }
            .form-input {
                float: left;
                margin-top: 20px;
                margin-right: 10%;
                margin-left: 5px;
            }
            .Bigbox_Style {
                text-align: center;
                border: solid 2px black;
                width: 1850px;
                height: 730px;
                display: none;
            }
        }
    </style>

    <script>
        $(document).ready(function() {
            $(function() {
                $("#checkboxDiv").find(":checkbox").each(function() {
                    $(this).click(function() {
                        if ($(this).is(':checked')) {
                            $(this).attr('checked', true).siblings().attr('checked', false);
                        } else {
                            $(this).attr('checked', false).siblings().attr('checked', false);
                        }
                    });
                });
            });
        });
        $(document).ready(function() {
            $(function() {
                $("#checkboxDiv2").find(":checkbox").each(function() {
                    $(this).click(function() {
                        if ($(this).is(':checked')) {
                            $(this).attr('checked', true).siblings().attr('checked', false);
                        } else {
                            $(this).attr('checked', false).siblings().attr('checked', false);
                        }
                    });
                });
            });
        });
    </script>
    
    <script type="text/javascript">
        window.onload = function() {

            var checkbox1 = this.document.getElementById('cboxA');
            var checkbox2 = this.document.getElementById('cboxB');
            var checkbox3 = this.document.getElementById('cboxC');
            var checkbox4 = this.document.getElementById('cboxD');
            var checkbox5 = this.document.getElementById('cboxE');
            var checkbox6 = this.document.getElementById('cboxF');

            checkbox1.onclick = function() {
                var c1 = $('#chart1');
                if (checkbox1.checked) {         
                    c1.animate({
                        position:fixed,
                        top:0,
                        width: '1850px',
                        height: '730px'
                    }, 888,function(){
                        Chart1.resize();
                    });
                    $('#chart2').hide();
                    $('#chart3').hide();
                    $('#chart4').hide();
                    $('#warningLog1').hide();
                    $('#warningLog2').hide();        
                    $('#box2').hide();
                    $('#box3').hide();
                    $('#box4').hide();
                    $('#box5').hide();
                    $('#box6').hide();
                } else {                  
                    c1.animate({
                        width: '612px',
                        height: '364px'
                    }, 888,function(){
                        Chart1.resize();
                        $('#chart2').fadeIn();
                        $('#chart3').fadeIn();
                        $('#chart4').fadeIn();
                        $('#warningLog1').fadeIn();
                        $('#warningLog2').fadeIn();                   
                        $('#box2').fadeIn();
                        $('#box3').fadeIn();
                        $('#box4').fadeIn();
                        $('#box5').fadeIn();
                        $('#box6').fadeIn();                  
                    }); 
                }
            };

            checkbox2.onclick = function() {
                var c2 = $('#chart2');
                if (checkbox2.checked) {         
                    c2.animate({
                        width: '1850px',
                        height: '730px'
                    }, 888,function(){
                        Chart2.resize();
                    });
                    $('#chart1').hide();
                    $('#chart3').hide();
                    $('#chart4').hide();
                    $('#warningLog1').hide();
                    $('#warningLog2').hide();        
                    $('#box1').hide();
                    $('#box3').hide();
                    $('#box4').hide();
                    $('#box5').hide();
                    $('#box6').hide();
                } else {
                    c2.animate({
                        width: '612px',
                        height: '364px'
                    }, 888,function(){
                        Chart2.resize();
                        $('#chart1').fadeIn();
                    $('#chart3').fadeIn();
                    $('#chart4').fadeIn();
                    $('#warningLog1').fadeIn();
                    $('#warningLog2').fadeIn();                   
                    $('#box1').fadeIn();
                    $('#box3').fadeIn();
                    $('#box4').fadeIn();
                    $('#box5').fadeIn();
                    $('#box6').fadeIn();
                    });
                   
                }
            };
            checkbox3.onclick = function() {
                var c3 = $('#chart3');
                if (checkbox3.checked) {         
                    c3.animate({
                        width: '1850px',
                        height: '730px'
                    }, 888,function(){
                        Chart3.resize();
                    });
                    $('#chart1').hide();
                    $('#chart2').hide();
                    $('#chart4').hide();
                    $('#warningLog1').hide();
                    $('#warningLog2').hide();        
                    $('#box1').hide();
                    $('#box2').hide();
                    $('#box4').hide();
                    $('#box5').hide();
                    $('#box6').hide();
                } else {
                    c3.animate({
                        width: '612px',
                        height: '364px'
                    }, 888,function(){
                        Chart3.resize();
                        $('#chart1').fadeIn();
                    $('#chart2').fadeIn();
                    $('#chart4').fadeIn();
                    $('#warningLog1').fadeIn();
                    $('#warningLog2').fadeIn();                   
                    $('#box1').fadeIn();
                    $('#box2').fadeIn();
                    $('#box4').fadeIn();
                    $('#box5').fadeIn();
                    $('#box6').fadeIn();
                    });                 
                }
            };
            checkbox4.onclick = function() {
                var c4 = $('#chart4');
                if (checkbox4.checked) {         
                    c4.animate({
                        width: '1850px',
                        height: '730px'
                    }, 888,function(){
                        Chart4.resize();
                    });
                    $('#chart1').hide();
                    $('#chart2').hide();
                    $('#chart3').hide();
                    $('#warningLog1').hide();
                    $('#warningLog2').hide();        
                    $('#box1').hide();
                    $('#box2').hide();
                    $('#box3').hide();
                    $('#box5').hide();
                    $('#box6').hide();
                } else {
                    c4.animate({
                        width: '612px',
                        height: '364px'
                    }, 888,function(){
                        Chart4.resize();
                        $('#chart1').fadeIn();
                    $('#chart2').fadeIn();
                    $('#chart3').fadeIn();
                    $('#warningLog1').fadeIn();
                    $('#warningLog2').fadeIn();                   
                    $('#box1').fadeIn();
                    $('#box2').fadeIn();
                    $('#box3').fadeIn();
                    $('#box5').fadeIn();
                    $('#box6').fadeIn();
                    });
                    
                }
                
            };
            checkbox5.onclick = function() {
                if (checkbox5.checked) {
                    document.getElementById('chart1').style.display = 'none';
                    document.getElementById('chart2').style.display = 'none';
                    document.getElementById('chart3').style.display = 'none';
                    document.getElementById('chart4').style.display = 'none';
                    document.getElementById('warningLog1').style.display = 'none';
                    document.getElementById('warningLog2').style.display = 'none';
                    document.getElementById('box5').style.display = 'block';
                    document.getElementById('box2').style.display = 'none';
                    document.getElementById('box3').style.display = 'none';
                    document.getElementById('box4').style.display = 'none';
                    document.getElementById('box1').style.display = 'none';
                    document.getElementById('box6').style.display = 'none';

                } else {
                    document.getElementById('chart1').style.display = 'block';
                    document.getElementById('chart2').style.display = 'block';
                    document.getElementById('chart3').style.display = 'block';
                    document.getElementById('chart4').style.display = 'block';
                    document.getElementById('warningLog1').style.display = 'block';
                    document.getElementById('warningLog2').style.display = 'block';
                    document.getElementById('box5').style.display = 'none';
                    document.getElementById('box2').style.display = 'none';
                    document.getElementById('box3').style.display = 'none';
                    document.getElementById('box4').style.display = 'none';
                    document.getElementById('box1').style.display = 'none';
                    document.getElementById('box6').style.display = 'none';

                }
            };
            checkbox6.onclick = function() {
                if (checkbox6.checked) {
                    document.getElementById('chart1').style.display = 'none';
                    document.getElementById('chart2').style.display = 'none';
                    document.getElementById('chart3').style.display = 'none';
                    document.getElementById('chart4').style.display = 'none';
                    document.getElementById('warningLog1').style.display = 'none';
                    document.getElementById('warningLog2').style.display = 'none';
                    document.getElementById('box6').style.display = 'block';
                    document.getElementById('box2').style.display = 'none';
                    document.getElementById('box3').style.display = 'none';
                    document.getElementById('box4').style.display = 'none';
                    document.getElementById('box5').style.display = 'none';
                    document.getElementById('box1').style.display = 'none';

                } else {
                    document.getElementById('chart1').style.display = 'block';
                    document.getElementById('chart2').style.display = 'block';
                    document.getElementById('chart3').style.display = 'block';
                    document.getElementById('chart4').style.display = 'block';
                    document.getElementById('warningLog1').style.display = 'block';
                    document.getElementById('warningLog2').style.display = 'block';
                    document.getElementById('box6').style.display = 'none';
                    document.getElementById('box2').style.display = 'none';
                    document.getElementById('box3').style.display = 'none';
                    document.getElementById('box4').style.display = 'none';
                    document.getElementById('box5').style.display = 'none';
                    document.getElementById('box1').style.display = 'none';

                }
            };



        };
    </script>
    <title>测试图表</title>
    <script src="https://cdn.staticfile.org/echarts/5.0.0/echarts.min.js"></script>
    <script src="wonderland.js"></script>
</head>

<body>
    <button class="btn btn-primary" type="button">点击我</button>
    <div class="modal fade" id="mymodal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title">模态弹出窗标题</h4>
                </div>
                <div class="modal-body"> 
                    <div id="chart1"></div>                           
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary">保存</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    <h1 align="center">生产线1-工艺数据统计</h1>
    <div class="box">
        <div class="boxnav">
            <form>
                <div id="checkboxDiv">
                    <input type="checkbox" name="checkboxName" value="A" id="cboxA" class="form-input" />
                    <label for=cboxA></label>
                    <span class="form-input">AAAA图</span>
                    <input type="checkbox" name="checkboxName" value="B" id="cboxB" class="form-input" />
                    <label for=cboxB></label>
                    <span class="form-input">BBBB图</span>
                    <input type="checkbox" name="checkboxName" value="C" id="cboxC" class="form-input" />
                    <label for=cboxC></label>
                    <span class="form-input">CCCC图</span>
                    <input type="checkbox" name="checkboxName" value="D" id="cboxD" class="form-input" />
                    <label for=cboxD></label>
                    <span class="form-input">DDDD图</span>
                    <input type="checkbox" name="checkboxName" value="E" id="cboxE" class="form-input" />
                    <label for=cboxE></label>
                    <span class="form-input">EEEE图</span>
                    <input type="checkbox" name="checkboxName" value="F" id="cboxF" class="form-input" />
                    <label for=cboxF></label>
                    <span class="form-input">FFFF图</span>
                </div>
            </form>
        </div>
        <div id="chart1" class="box_style ">
        </div>

        <div id="chart2" class="box_style ">
        </div>

        <div id="chart3" class="box_style ">
        </div>
        <div id="chart4" class="box_style ">
        </div>

        <div id="warningLog1" style="overflow-y:auto;" class="box_style ">
            <p id="DefaultMessage1">严重危险警报：</p>
        </div>
        <div id="warningLog2" style="overflow-y:auto;" class="box_style ">
            <p id="DefaultMessage2">潜在危险警报：</p>
        </div>
        <!--
        <div class="Bigbox_Style" id="box1"></div>
        <div class="Bigbox_Style" id="box2"></div>
        <div class="Bigbox_Style" id="box3"></div>
        <div class="Bigbox_Style" id="box4"></div>
        <div class="Bigbox_Style" id="box5"></div>
        <div class="Bigbox_Style" id="box6"></div>
        -->
    </div>


    <form id="ChangeInformation" class="box_style">
        <p>
            高位阈值: <input type="text" id="high" style="display:inline">
        </p>
        <p>
            中位阈值: <input type="text" id="average" style="display:inline">
        </p>
        <p>
            低位阈值: <input type="text" id="low" style="display:inline">
        </p>
        <p>
            <button type="button" onclick="ChangeInformation()">提交</button> <button type="button" onclick="Reset()">重置</button>
        </p>
    </form>

    <div id="efficiency" style="overflow-y:auto;" class="box_style"> 
        <p id="eMessage">运行效率分析</p>
        </div>

    <div id="ColChart" class="box_style">
        </div>

    <script>
        var id = [],
            length = [],
            width = [],
            height = [],
            weight = [];

        function getData() {
            var url = "http://localhost:8080/sample3";
            $.getJSON(url, function(json_data) {
                id.push(json_data[0]['id']);
                length.push(json_data[0]['length']);
                width.push(json_data[0]['width']);
                height.push(json_data[0]['height']);
                weight.push(json_data[0]['weight']);
            });
        }

        getData();

        var HigherCount = 0;
        var LowerCount = 0;
        var HighestHeight = 17;
        var AverageHeight = 16.5;
        var LowestHeight = 16;

        function judge() {
            if (height[height.length - 1] > HighestHeight) {
                HigherCount++;
                let position = document.getElementById('warningLog1');
                let temp = document.createElement('p');
                var now = new Date();
                let warningText = now + "产线出现严重危险：height值：" + height[height.length - 1] + " 大于最大阈值";
                temp.innerText = warningText;
                position.appendChild(temp);
            } else if (height[height.length - 1] < LowestHeight) {
                LowerCount++;
                let position = document.getElementById('warningLog1');
                let temp = document.createElement('p');
                var now = new Date();
                let warningText = now + "产线出现严重危险：height值：" + height[height.length - 1] + " 低于最小阈值";
                temp.innerText = warningText;
                position.appendChild(temp);
            } else if (height[height.length - 1] >= AverageHeight && height[height.length - 1] <= HighestHeight) {
                HigherCount++;
                LowerCount = 0;
            } else if (height[height.length - 1] < AverageHeight && height[height.length - 1] >= LowestHeight) {
                HigherCount = 0;
                LowerCount++;
            }


            if (HigherCount >= 5) {
                let position = document.getElementById('warningLog2');
                let temp = document.createElement('p');
                var now = new Date();
                let warningText = now + "产线出现潜在危险：height值连续" + HigherCount + "次高于中位阈值";
                temp.innerText = warningText;
                position.appendChild(temp);
            } else if (LowerCount >= 5) {
                let position = document.getElementById('warningLog2');
                let temp = document.createElement('p');
                var now = new Date();
                let warningText = now + "产线出现潜在危险：height值连续" + LowerCount + "次低于中位阈值";
                temp.innerText = warningText;
                position.appendChild(temp);
            }

        }

        function ChangeInformation() {
            LowestHeight = Number(document.getElementById('low').value);
            HighestHeight = Number(document.getElementById('high').value);
            AverageHeight = Number(document.getElementById('average').value);
        }

        function Reset() {
            HighestHeight = 17;
            AverageHeight = 16.5;
            LowestHeight = 16;
            document.getElementById('low').value = "";
            document.getElementById('high').value = "";
            document.getElementById('average').value = "";
        }

        function effCalc(a,b){
            let value = a * height[height.length - 1] + b;
            let div = $('#eMessage');
            let now = new Date();
            let tempdom = document.createElement('p');
            tempdom.innerText = now + ":效率为："+value;
            div.append(tempdom);
        }


        var ColChartoption = {
            title: {
                text: '瓶颈工位监测'
            },
            xAxis: {
            type: 'category',
            data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
            },
            yAxis: {
            type: 'value'
            },
            series: [{
            data: [120, 200, 150, 80, 70, 110, 130],
            type: 'bar',
            showBackground: true,
            backgroundStyle: {
            color: 'rgba(180, 180, 180, 0.2)'
             }
        }]
    };
        
        var Chart1option = {
            title: {
                text: '表格1'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['长度']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                name: 'id',
                type: 'category',
                boundaryGap: false,
                data: id
            },
            yAxis: {
                min: 0,
                max: 30,
                name: 'value',
                type: 'value',
                boundaryGap: [0, '50%'],
            },
            series: [{
                name: '长度',
                type: 'line',
                data: length,
                stack: '值'
            }]
        }

        var Chart2option = {
            title: {
                text: '表格2'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['高度']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                name: 'id',
                type: 'category',
                boundaryGap: false,
                data: id
            },
            yAxis: {
                min: 0,
                max: 30,
                name: 'value',
                type: 'value',
                boundaryGap: [0, '50%'],
            },
            series: [{
                name: '高度',
                type: 'line',
                data: height,
                stack: '值'
            }]
        }

        var Chart3option = {
            title: {
                text: '表格3'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['宽度']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                name: 'id',
                type: 'category',
                boundaryGap: false,
                data: id
            },
            yAxis: {
                min: 0,
                max: 30,
                name: 'value',
                type: 'value',
                boundaryGap: [0, '50%'],
            },
            series: [{
                name: '宽度',
                type: 'line',
                data: width,
                stack: '值'
            }]
        }

        var Chart4option = {
            title: {
                text: '表格4'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['重量']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                name: 'id',
                type: 'category',
                boundaryGap: false,
                data: id
            },
            yAxis: {
                min: 0,
                max: 50,
                name: 'value',
                type: 'value',
                boundaryGap: [0, '50%'],
            },
            series: [{
                name: '重量',
                type: 'line',
                data: weight,
                stack: '值'
            }]
        }

        setInterval(function() {
            getData();
            judge();
            effCalc(2,3);
            Chart1.setOption({
                xAxis: {
                    data: id
                },
                series: [{
                    name: '长度',
                    type: 'line',
                    data: length,
                    stack: '值'
                }]
            });

            Chart2.setOption({
                xAxis: {
                    data: id
                },
                series: [{
                    name: '高度',
                    type: 'line',
                    data: height,
                    stack: '值'
                }]
            });

            Chart4.setOption({
                xAxis: {
                    data: id
                },
                series: [{
                    name: '重量',
                    type: 'line',
                    data: weight,
                    stack: '值'
                }]
            });

            Chart3.setOption({
                xAxis: {
                    data: id
                },
                series: [{
                    name: '宽度',
                    type: 'line',
                    data: width,
                    stack: '值'
                }]
            });
        }, 1000);

        var Colchart = echarts.init(document.getElementById('ColChart'));
        Colchart.setOption(ColChartoption);

        var Chart1 = echarts.init(document.getElementById('chart1'), 'wonderland');
        Chart1.setOption(Chart1option);

        var Chart2 = echarts.init(document.getElementById('chart2'), 'wonderland');
        Chart2.setOption(Chart2option);

        var Chart3 = echarts.init(document.getElementById('chart3'), 'wonderland');
        Chart3.setOption(Chart3option);

        var Chart4 = echarts.init(document.getElementById('chart4'), 'wonderland');
        Chart4.setOption(Chart4option);

        $(function(){       
            $(".btn").click(function(){
          $("#mymodal").modal("toggle");
        });
      });        
    </script>
</body>
</html>